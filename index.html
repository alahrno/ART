<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ART - Ù…ØªØ¬Ø± Ø§Ù„Ù…ÙƒÙŠØ§Ø¬</title>

  <style>
    :root{
      --bg:#050506;
      --panel:#0d0d10;
      --text:#ffffff;
      --muted:rgba(255,255,255,.72);
      --line:rgba(255,255,255,.10);
      --pink:#ff4fa3;
      --pink2:#ff86c7;

      --radius:18px;
      --container: 1120px;
      --shadow: 0 18px 70px rgba(0,0,0,.55);

      --card-bg:#ffffff;
      --card-text:#0b0b0d;
      --card-muted:#2b2b2b;
      --card-border:#0b0b0d;
      --stripeA: rgba(0,0,0,.06);
      --stripeB: rgba(0,0,0,0);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Arial;
      color: var(--text);
      background:
        radial-gradient(800px 360px at 70% 0%, rgba(255,79,163,.10), transparent 60%),
        radial-gradient(640px 300px at 20% 10%, rgba(255,134,199,.08), transparent 58%),
        linear-gradient(180deg, #050506, #070708 45%, #050506);
    }

    .container{
      max-width: var(--container);
      margin: 0 auto;
      padding: 0 16px;
    }

    /* HERO */
    .hero{ padding: 28px 0 12px; }

    .hero-card{
      border-radius: calc(var(--radius) + 10px);
      border: 1px solid rgba(255,255,255,.12);
      background:
        radial-gradient(420px 240px at 85% 30%, rgba(255,79,163,.14), transparent 62%),
        linear-gradient(135deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      box-shadow: var(--shadow);
      padding: 18px;
      display:grid;
      grid-template-columns: 340px 1fr;
      gap: 16px;
      align-items: stretch;
      overflow:hidden;
      position:relative;
    }

    .hero-media{
      border-radius: calc(var(--radius) + 8px);
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.25);
      box-shadow: 0 16px 55px rgba(0,0,0,.45);
      overflow:hidden;
      position:relative;
      z-index:1;
      aspect-ratio: 9 / 16;
      width: 100%;
      align-self: center;
    }
    .hero-media video{
      width:100%;
      height:100%;
      display:block;
      object-fit: cover;
      background:#000;
    }

    .hero-copy{
      position:relative;
      z-index:1;
      padding: 8px 6px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap: 10px;
      min-height: 100%;
    }

    .hero h1{ margin:0; font-size: 34px; letter-spacing:.4px; line-height: 1.25; }
    .hero p{ margin:0; color: rgba(255,255,255,.80); line-height: 1.9; font-size: 14px; max-width: 62ch; }

    .hero-pills{ display:flex; gap: 8px; flex-wrap:wrap; margin-top: 2px; }
    .pill{
      display:inline-flex; align-items:center; gap: 8px;
      padding: 9px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color: rgba(255,255,255,.85);
      font-size: 12px;
      font-weight: 800;
    }
    .pill::before{
      content:"";
      width:8px;height:8px;border-radius:999px;
      background: rgba(255,79,163,.95);
      box-shadow: 0 0 0 4px rgba(255,79,163,.12);
    }

    .hero-actions{ display:flex; gap:10px; flex-wrap:wrap; margin-top: 6px; }
    .btn{
      border:none; cursor:pointer;
      border-radius: 999px;
      padding: 12px 14px;
      font-size: 13px;
      color: var(--text);
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      transition:.18s ease;
      white-space:nowrap;
      font-weight: 900;
    }
    .btn--white{ background:#fff; color:#0b0b0d; border-color: rgba(255,255,255,.55); }
    .btn--pink{
      background: linear-gradient(135deg, rgba(255,79,163,.98), rgba(255,134,199,.86));
      color:#0b0b0d;
      border-color: rgba(255,255,255,.18);
    }

    section{ padding: 18px 0; }
    .section-title{ display:flex; justify-content: space-between; align-items: baseline; gap: 10px; margin: 0 0 12px; }
    .section-title h2{ margin:0; font-size: 18px; }
    .section-title small{ color: rgba(255,255,255,.65); }

    .muted-card{
      border-radius: var(--radius);
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.03);
      padding: 14px;
      color: rgba(255,255,255,.78);
      line-height: 1.9;
    }

    .grid{ display:grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }

    .product{
      border-radius: var(--radius);
      border: 2px solid var(--card-border);
      background:
        repeating-linear-gradient(135deg, var(--stripeA) 0px, var(--stripeA) 10px, var(--stripeB) 10px, var(--stripeB) 20px),
        var(--card-bg);
      box-shadow: 0 16px 45px rgba(0,0,0,.22);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      min-height: 250px;
      color: var(--card-text);
      transition: transform .18s ease, box-shadow .18s ease;
    }
    .thumb{
      height: 120px;
      background:
        linear-gradient(180deg, rgba(0,0,0,.06), rgba(0,0,0,0)),
        repeating-linear-gradient(45deg, rgba(0,0,0,.12) 0px, rgba(0,0,0,.12) 8px, rgba(0,0,0,0) 8px, rgba(0,0,0,0) 16px),
        #fff;
      border-bottom: 2px solid var(--card-border);
      position:relative;
    }
    .tag{
      position:absolute; top:10px; inset-inline-start:10px;
      font-size: 12px;
      padding: 7px 10px;
      border-radius: 999px;
      background: #fff;
      border: 2px solid #0b0b0d;
      color: #0b0b0d;
      font-weight: 1000;
      display:inline-flex;
      align-items:center;
      gap: 8px;
    }
    .tag::after{
      content:"";
      width:8px;height:8px;border-radius:999px;
      background: var(--pink);
      box-shadow: 0 0 0 4px rgba(255,79,163,.12);
    }
    .body{ padding: 12px; display:flex; flex-direction:column; gap: 8px; flex: 1; }
    .name{ margin:0; font-size: 14px; line-height: 1.6; color:#0b0b0d; font-weight: 1000; }
    .meta{ display:flex; justify-content: space-between; align-items:center; gap: 10px; color: var(--card-muted); font-size: 12px; font-weight: 800; }
    .price{
      font-weight: 1100;
      color:#0b0b0d;
      padding: 6px 10px;
      border-radius: 999px;
      background:#fff;
      border: 2px solid #0b0b0d;
    }
    .controls{ display:flex; gap: 8px; margin-top: auto; flex-wrap: wrap; }
    .card-btn{
      cursor:pointer;
      border-radius: 14px;
      padding: 10px 12px;
      font-size: 12px;
      font-weight: 1000;
      border: 2px solid #0b0b0d;
      background: #fff;
      color:#0b0b0d;
    }
    .card-btn--primary{ background:#0b0b0d; color:#fff; }

    .empty{
      display:none;
      margin-top: 10px;
      padding: 14px;
      border-radius: var(--radius);
      border: 1px solid rgba(255,79,163,.25);
      background: rgba(255,79,163,.08);
      color: rgba(255,255,255,.92);
    }

    @media (max-width: 980px){
      .hero-card{ grid-template-columns: 1fr; padding: 16px; }
      .hero-media{ max-width: 420px; margin-inline: auto; }
      .grid{ grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 480px){
      .grid{ grid-template-columns: 1fr; }
      .hero h1{ font-size: 28px; }
    }
  </style>
</head>

<body>
  <div id="headerMount"></div>

  <main class="container">
    <div class="hero" id="new">
      <div class="hero-card">
        <div class="hero-media" aria-label="ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø¨Ù†Ø±">
          <video
            id="heroVideo"
            muted
            autoplay
            loop
            playsinline
            webkit-playsinline
            preload="metadata"
          >
            <source src="media/mm.mp4" type="video/mp4">
            Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ.
          </video>
        </div>

        <div class="hero-copy">
          <h1>ART â€” Ø¬Ù…Ø§Ù„Ùƒ ÙÙ†</h1>
          <p>
            ÙÙŠØ¯ÙŠÙˆ Ø·ÙˆÙ„ÙŠ ÙŠØ¹Ø±Ø¶ Ø§Ù„Ø¥Ø­Ø³Ø§Ø³ Ø§Ù„ÙØ§Ø®Ø± Ù„Ù„Ù‘ÙˆÙƒ.
            Ø£Ù„ÙˆØ§Ù† Ø¬Ø±ÙŠØ¦Ø©ØŒ ØªÙØ§ØµÙŠÙ„ Ù†Ø¸ÙŠÙØ©ØŒ ÙˆÙ„Ù…Ø³Ø© ÙˆØ±Ø¯ÙŠØ© Ø¨Ø³ÙŠØ·Ø© â€” ØªØ¬Ø±Ø¨Ø© Ù‚Ø±ÙŠØ¨Ø© Ù…Ù† Ø£Ø³Ù„ÙˆØ¨ Ø§Ù„Ù…ØªØ§Ø¬Ø± Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©.
          </p>

          <div class="hero-pills" aria-label="Ù…Ù…ÙŠØ²Ø§Øª">
            <span class="pill">Ø³ØªØ§ÙŠÙ„ ÙØ§Ø®Ø±</span>
            <span class="pill">Ù…Ù†ØªØ¬Ø§Øª Ù…Ø®ØªØ§Ø±Ø©</span>
            <span class="pill">ØªØ³ÙˆÙ‚ Ø³Ø±ÙŠØ¹</span>
          </div>

          <div class="hero-actions">
            <button class="btn btn--pink" type="button" onclick="document.getElementById('products').scrollIntoView({behavior:'smooth'})">ØªØ³ÙˆÙ‚ÙŠ Ø§Ù„Ø¢Ù†</button>
            <button class="btn btn--white" type="button" onclick="document.getElementById('offers').scrollIntoView({behavior:'smooth'})">Ø¹Ø±Ø¶ Ø§Ù„ÙŠÙˆÙ…</button>
          </div>

          <p style="margin-top:6px; font-size:12px; color:rgba(255,255,255,.65);">
            ÙŠØ¹Ù…Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ù„Ø§Øª (Ø¨Ù…Ø§ ÙÙŠÙ‡Ø§ iPhone) Ù„Ø£Ù†Ù‡ ØµØ§Ù…Øª + Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙØ­Ø©.
          </p>
        </div>
      </div>
    </div>

    <section id="offers">
      <div class="section-title">
        <h2>Ø§Ù„Ø¹Ø±ÙˆØ¶</h2>
        <small>ØªØ­Ø¯ÙŠØ«Ø§Øª Ø¨Ø³ÙŠØ·Ø© â€” Ø®ØµÙ… Ø§Ù„ÙŠÙˆÙ…</small>
      </div>
      <div class="muted-card">
        ğŸ’— Ø®ØµÙ… 10% Ø¹Ù„Ù‰ Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„ÙˆØ±Ø¯ÙŠ Ø¹Ù†Ø¯ Ø¥Ø¶Ø§ÙØ© 3 Ù…Ù†ØªØ¬Ø§Øª Ù„Ù„Ø³Ù„Ø© (ØªØ¬Ø±ÙŠØ¨ÙŠ).
      </div>
    </section>

    <section id="products">
      <div class="section-title">
        <h2>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h2>
        <small id="resultCount">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</small>
      </div>

      <div class="grid" id="productsGrid"></div>

      <div class="empty" id="emptyState">
        Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„Ø¨Ø­Ø«. Ø¬Ø±Ù‘Ø¨ÙŠ ÙƒÙ„Ù…Ø© Ù…Ø®ØªÙ„ÙØ© ğŸŒ¸
      </div>
    </section>

    <section id="about">
      <div class="section-title">
        <h2>Ø¹Ù† ART</h2>
        <small>Ù…ÙŠÙ†ÙŠ Ù†Ø¨Ø°Ø©</small>
      </div>
      <div class="muted-card">
        ART Ù…ØªØ¬Ø± Ù…ÙƒÙŠØ§Ø¬ ÙŠØ±ÙƒØ² Ø¹Ù„Ù‰ ØªØ¬Ø±Ø¨Ø© Ø´Ø±Ø§Ø¡ Ø¨Ø³ÙŠØ·Ø© ÙˆÙØ§Ø®Ø±Ø©: ÙˆØ§Ø¬Ù‡Ø© Ù†Ø¸ÙŠÙØ©ØŒ ØªØ¨Ø§ÙŠÙ† Ø£Ø³ÙˆØ¯/Ø£Ø¨ÙŠØ¶ Ù‚ÙˆÙŠØŒ ÙˆÙ„Ù…Ø³Ø§Øª ÙˆØ±Ø¯ÙŠØ© Ø®ÙÙŠÙØ©.
      </div>
    </section>
  </main>

  <div id="footerMount"></div>

  <script>
    (function(){
      // âœ… Fallback templates (Ø¥Ø°Ø§ Render Ù…Ø§ ÙŠØ®Ø¯Ù… header.html / footer.html)
      function headerFallback(){ return `<!-- header fallback -->` + (window.__ART_HEADER_FALLBACK__ || ""); }
      function footerFallback(){ return `<!-- footer fallback -->` + (window.__ART_FOOTER_FALLBACK__ || ""); }

      // Ù†Ø­ÙØ¸ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ÙƒÙ†Øµ (Ù†ÙØ³ ÙÙƒØ±Ø© ÙˆØ¬ÙˆØ¯ Ù…Ù„ÙØ§Øª Ù…Ù†ÙØµÙ„Ø©)
      // Ù…Ù„Ø§Ø­Ø¸Ø©: Ù‡Ù†Ø§ Ù†ØªØ±ÙƒÙ‡Ø§ ÙØ§Ø±ØºØ© Ù„Ø£Ù†Ù†Ø§ Ù†Ø«Ù‚ Ø¨Ù…Ù„ÙØ§ØªÙƒØŒ Ù„ÙƒÙ† Ù†Ù…Ù„Ø¤Ù‡Ø§ Ø¥Ø°Ø§ ÙØ´Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„
      window.__ART_HEADER_FALLBACK__ = "";
      window.__ART_FOOTER_FALLBACK__ = "";

      async function fetchFirstOk(paths){
        for (const p of paths){
          try{
            const res = await fetch(p, { cache: "no-store" });
            if (!res.ok) continue;
            const text = await res.text();
            // Ù„Ùˆ Ø±Ø¬Ø¹ HTML ÙƒØ¨ÙŠØ± (index) Ø¨Ø¯Ù„ fragmentØŒ Ù†Ø¹ØªØ¨Ø±Ù‡ ØºÙŠØ± ØµØ§Ù„Ø­
            if (text.includes("<!doctype html") || text.includes("<html")) continue;
            return text;
          }catch(e){
            // try next
          }
        }
        return null;
      }

      function injectAndRun(mount, html){
        mount.innerHTML = html;
        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙƒØ±Ø¨ØªØ§Øª Ø¯Ø§Ø®Ù„ fragment
        const scripts = mount.querySelectorAll("script");
        scripts.forEach(oldScript => {
          const s = document.createElement("script");
          [...oldScript.attributes].forEach(a => s.setAttribute(a.name, a.value));
          s.textContent = oldScript.textContent;
          oldScript.replaceWith(s);
        });
      }

      async function loadFragment(mountId, fileName, fallbackHtml){
        const mount = document.getElementById(mountId);
        if (!mount) return;

        // âœ… Ø¬Ø±Ù‘Ø¨ÙŠ Ø£ÙƒØ«Ø± Ù…Ù† Ù…Ø³Ø§Ø± (Ù‡Ø°Ø§ ÙŠØ­Ù„ Render ØºØ§Ù„Ø¨Ù‹Ø§)
        const candidates = [
          fileName,
          "./" + fileName,
          "/" + fileName
        ];

        const html = await fetchFirstOk(candidates);
        if (html){
          injectAndRun(mount, html);
          return;
        }

        // âœ… fallback: Ø¨Ø¯Ù„ Ø´Ø§Ø´Ø© Ø§Ù„Ø®Ø·Ø£ (Ø­ØªÙ‰ Ù„Ø§ ÙŠØ®ØªÙÙŠ Ø§Ù„Ù‡ÙŠØ¯Ø± ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬)
        injectAndRun(mount, fallbackHtml);
        console.warn("Failed to load fragment:", fileName, "Using fallback.");
      }

      // âœ… Ø¶Ø¹ fallback Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ: Ù†Ù‚Ø±Ø£ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ© ÙƒÙ€ string Ø¹Ù†Ø¯ Ø§Ù„ØªØ·ÙˆÙŠØ±ØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ†.
      // Ù„Ø°Ù„Ùƒ ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ù„Ùˆ ÙØ´Ù„ØŒ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù„Ø§ Ù†Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ù…Ø²Ø¹Ø¬Ø©Ø› Ù†Ø¹Ø±Ø¶ minimal bar.
      const minimalHeader = `
        <div style="max-width:1120px;margin:0 auto;padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.10);background:rgba(7,7,8,.72);backdrop-filter:blur(12px);color:#fff;font-family:system-ui">
          <b style="letter-spacing:.6px">ART</b>
          <span style="color:rgba(255,255,255,.7);font-size:12px;margin-inline-start:8px">Beauty â€¢ Makeup</span>
          <div style="margin-top:8px;color:rgba(255,255,255,.65);font-size:12px">ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ header.html Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ± â€” ØªØ£ÙƒØ¯ÙŠ Ø£Ù† Ø§Ù„Ù…Ù„Ù Ù…Ø±ÙÙˆØ¹ Ø¨Ø¬Ø§Ù†Ø¨ index.html</div>
        </div>
      `;
      const minimalFooter = `
        <div style="max-width:1120px;margin:18px auto 0;padding:18px 16px;border-top:1px solid rgba(255,255,255,.10);color:rgba(255,255,255,.7);font-family:system-ui;font-size:12px">
          Â© ${new Date().getFullYear()} ART
        </div>
      `;

      loadFragment("headerMount", "header.html", minimalHeader);
      loadFragment("footerMount", "footer.html", minimalFooter);

      // Products
      const products = [
        { id:"p1", name:"Ø±ÙˆØ¬ Ù…Ø·ÙÙŠ - Pink Velvet", category:"Ø±ÙˆØ¬", price:79, badge:"Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ù‹Ø§" },
        { id:"p2", name:"Ø¢ÙŠØ´Ø§Ø¯Ùˆ - Mono Black", category:"Ø¢ÙŠØ´Ø§Ø¯Ùˆ", price:99, badge:"Ø¬Ø¯ÙŠØ¯" },
        { id:"p3", name:"Ø¨Ù„Ø§Ø´Ø± - Soft Rose", category:"Ø¨Ù„Ø§Ø´Ø±", price:85, badge:"ÙˆØ±Ø¯ÙŠ" },
        { id:"p4", name:"ÙØ§ÙˆÙ†Ø¯ÙŠØ´Ù† - White Base", category:"ÙØ§ÙˆÙ†Ø¯ÙŠØ´Ù†", price:120, badge:"Ø«Ø§Ø¨Øª" },
        { id:"p5", name:"Ø±ÙˆØ¬ Ù„Ø§Ù…Ø¹ - Candy Pink", category:"Ø±ÙˆØ¬", price:72, badge:"ÙˆØ±Ø¯ÙŠ" },
        { id:"p6", name:"Ù…Ø§Ø³ÙƒØ§Ø±Ø§ - Deep Black", category:"Ù…Ø§Ø³ÙƒØ§Ø±Ø§", price:68, badge:"Ø£Ø³ÙˆØ¯" },
        { id:"p7", name:"ÙƒÙˆÙ†ØªÙˆØ± - Shadow Art", category:"ÙƒÙˆÙ†ØªÙˆØ±", price:110, badge:"Ø§Ø­ØªØ±Ø§ÙÙŠ" },
        { id:"p8", name:"Ù‡Ø§ÙŠÙ„Ø§ÙŠØªØ± - Pearl White", category:"Ù‡Ø§ÙŠÙ„Ø§ÙŠØªØ±", price:95, badge:"Ù„Ø§Ù…Ø¹" }
      ];

      const grid = document.getElementById("productsGrid");
      const empty = document.getElementById("emptyState");
      const resultCount = document.getElementById("resultCount");

      function escapeHtml(str){
        return String(str).replace(/[&<>"']/g, (m) => ({
          "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
        }[m]));
      }

      function getNum(k){ return Number(localStorage.getItem(k) || "0"); }
      function setNum(k,v){ localStorage.setItem(k, String(v)); }
      function syncHeaderCounts(){ window.dispatchEvent(new Event("art:syncCounts")); }

      function render(list){
        if (!grid) return;
        grid.innerHTML = "";

        if (!list.length){
          if (empty) empty.style.display = "block";
          if (resultCount) resultCount.textContent = "0 Ù†ØªØ§Ø¦Ø¬";
          return;
        }
        if (empty) empty.style.display = "none";
        if (resultCount) resultCount.textContent = list.length === products.length ? "Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„" : (list.length + " Ù†ØªØ§Ø¦Ø¬");

        list.forEach(p => {
          const card = document.createElement("article");
          card.className = "product";
          card.innerHTML = `
            <div class="thumb">
              <span class="tag">${escapeHtml(p.badge)}</span>
            </div>
            <div class="body">
              <h3 class="name">${escapeHtml(p.name)}</h3>
              <div class="meta">
                <span>${escapeHtml(p.category)}</span>
                <span class="price">${p.price} Ø±.Ø³</span>
              </div>
              <div class="controls">
                <button class="card-btn card-btn--primary" type="button" data-add="${p.id}">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</button>
                <button class="card-btn" type="button" data-wish="${p.id}">Ù…ÙØ¶Ù„Ø©</button>
              </div>
            </div>
          `;
          grid.appendChild(card);
        });
      }

      document.addEventListener("click", (e) => {
        const addId = e.target && e.target.getAttribute && e.target.getAttribute("data-add");
        const wishId = e.target && e.target.getAttribute && e.target.getAttribute("data-wish");

        if (addId){
          setNum("art_cart_count", getNum("art_cart_count") + 1);
          syncHeaderCounts();
        }
        if (wishId){
          setNum("art_wish_count", getNum("art_wish_count") + 1);
          syncHeaderCounts();
        }
      });

      window.addEventListener("art:search", (ev) => {
        const q = (ev.detail && ev.detail.query ? ev.detail.query : "").toLowerCase().trim();
        if (!q) return render(products);
        const filtered = products.filter(p =>
          p.name.toLowerCase().includes(q) || p.category.toLowerCase().includes(q)
        );
        render(filtered);
      });

      // âœ… iPhone video fix (strong)
      function enableAutoplay(){
        const v = document.getElementById("heroVideo");
        if (!v) return;

        // enforce attributes for iOS
        v.setAttribute("muted","");
        v.muted = true;
        v.setAttribute("playsinline","");
        v.setAttribute("webkit-playsinline","");
        v.playsInline = true;
        v.setAttribute("autoplay","");
        v.setAttribute("loop","");

        const tryPlay = async () => {
          try { await v.play(); } catch(e) {}
        };

        // try several times (some iOS cases need delay)
        tryPlay();
        setTimeout(tryPlay, 300);
        setTimeout(tryPlay, 1200);

        document.addEventListener("visibilitychange", () => {
          if (!document.hidden) tryPlay();
        });

        const kick = () => {
          tryPlay();
          window.removeEventListener("touchstart", kick);
          window.removeEventListener("click", kick);
          window.removeEventListener("scroll", kick);
        };
        window.addEventListener("touchstart", kick, { passive:true });
        window.addEventListener("click", kick);
        window.addEventListener("scroll", kick, { passive:true });
      }

      enableAutoplay();
      render(products);
    })();
  </script>
</body>
</html>